var swfobject=function(){function F(){if(!o){try{var n=b.getElementsByTagName("body")[0].appendChild(b.createElement("span"));n.parentNode.removeChild(n)}catch(a){return}o=!0;for(var n=g.length,c=0;c<n;c++)g[c]()}}function k(n){o?n():g[g.length]=n}function K(n){if(typeof a.addEventListener!=i)a.addEventListener("load",n,!1);else if(typeof b.addEventListener!=i)b.addEventListener("load",n,!1);else if(typeof a.attachEvent!=i)v(a,"onload",n);else if("function"==typeof a.onload){var c=a.onload;a.onload=
function(){c();n()}}else a.onload=n}function H(){var n=b.getElementsByTagName("body")[0],c=b.createElement(p);c.setAttribute("type",A);var a=n.appendChild(c);if(a){var l=0;(function(){if(typeof a.GetVariable!=i){var b=a.GetVariable("$version");b&&(b=b.split(" ")[1].split(","),j.pv=[parseInt(b[0],10),parseInt(b[1],10),parseInt(b[2],10)])}else if(10>l){l++;setTimeout(arguments.callee,10);return}n.removeChild(c);a=null;z()})()}else z()}function z(){var n=l.length;if(0<n)for(var c=0;c<n;c++){var a=l[c].id,
b=l[c].callbackFn,e={success:!1,id:a};if(0<j.pv[0]){var g=t(a);if(g)if(w(l[c].swfVersion)&&!(j.wk&&312>j.wk))x(a,!0),b&&(e.success=!0,e.ref=G(a),b(e));else if(l[c].expressInstall&&B()){e={};e.data=l[c].expressInstall;e.width=g.getAttribute("width")||"0";e.height=g.getAttribute("height")||"0";g.getAttribute("class")&&(e.styleclass=g.getAttribute("class"));g.getAttribute("align")&&(e.align=g.getAttribute("align"));for(var f={},g=g.getElementsByTagName("param"),h=g.length,q=0;q<h;q++)"movie"!=g[q].getAttribute("name").toLowerCase()&&
(f[g[q].getAttribute("name")]=g[q].getAttribute("value"));C(e,f,a,b)}else L(g),b&&b(e)}else if(x(a,!0),b){if((a=G(a))&&typeof a.SetVariable!=i)e.success=!0,e.ref=a;b(e)}}}function G(n){var a=null;if((n=t(n))&&"OBJECT"==n.nodeName)typeof n.SetVariable!=i?a=n:(n=n.getElementsByTagName(p)[0])&&(a=n);return a}function B(){return!u&&w("6.0.65")&&(j.win||j.mac)&&!(j.wk&&312>j.wk)}function C(n,c,e,g){u=!0;I=g||null;N={success:!1,id:e};var l=t(e);if(l){"OBJECT"==l.nodeName?(f=s(l),h=null):(f=l,h=e);n.id=
r;if(typeof n.width==i||!/%$/.test(n.width)&&310>parseInt(n.width,10))n.width="310";if(typeof n.height==i||!/%$/.test(n.height)&&137>parseInt(n.height,10))n.height="137";b.title=b.title.slice(0,47)+" - Flash Player Installation";g=j.ie&&j.win?"ActiveX":"PlugIn";g="MMredirectURL="+a.location.toString().replace(/&/g,"%26")+"&MMplayerType="+g+"&MMdoctitle="+b.title;c.flashvars=typeof c.flashvars!=i?c.flashvars+("&"+g):g;j.ie&&(j.win&&4!=l.readyState)&&(g=b.createElement("div"),e+="SWFObjectNew",g.setAttribute("id",
e),l.parentNode.insertBefore(g,l),l.style.display="none",function(){l.readyState==4?l.parentNode.removeChild(l):setTimeout(arguments.callee,10)}());E(n,c,e)}}function L(n){if(j.ie&&j.win&&4!=n.readyState){var c=b.createElement("div");n.parentNode.insertBefore(c,n);c.parentNode.replaceChild(s(n),c);n.style.display="none";(function(){4==n.readyState?n.parentNode.removeChild(n):setTimeout(arguments.callee,10)})()}else n.parentNode.replaceChild(s(n),n)}function s(c){var a=b.createElement("div");if(j.win&&
j.ie)a.innerHTML=c.innerHTML;else if(c=c.getElementsByTagName(p)[0])if(c=c.childNodes)for(var l=c.length,g=0;g<l;g++)!(1==c[g].nodeType&&"PARAM"==c[g].nodeName)&&8!=c[g].nodeType&&a.appendChild(c[g].cloneNode(!0));return a}function E(c,a,g){var l,f=t(g);if(j.wk&&312>j.wk)return l;if(f)if(typeof c.id==i&&(c.id=g),j.ie&&j.win){var q="",h;for(h in c)c[h]!=Object.prototype[h]&&("data"==h.toLowerCase()?a.movie=c[h]:"styleclass"==h.toLowerCase()?q+=' class="'+c[h]+'"':"classid"!=h.toLowerCase()&&(q+=" "+
h+'="'+c[h]+'"'));h="";for(var m in a)a[m]!=Object.prototype[m]&&(h+='<param name="'+m+'" value="'+a[m]+'" />');f.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+q+">"+h+"</object>";e[e.length]=c.id;l=t(c.id)}else{m=b.createElement(p);m.setAttribute("type",A);for(var d in c)c[d]!=Object.prototype[d]&&("styleclass"==d.toLowerCase()?m.setAttribute("class",c[d]):"classid"!=d.toLowerCase()&&m.setAttribute(d,c[d]));for(q in a)a[q]!=Object.prototype[q]&&"movie"!=q.toLowerCase()&&
(c=m,h=q,d=a[q],g=b.createElement("param"),g.setAttribute("name",h),g.setAttribute("value",d),c.appendChild(g));f.parentNode.replaceChild(m,f);l=m}return l}function J(c){var a=t(c);a&&"OBJECT"==a.nodeName&&(j.ie&&j.win?(a.style.display="none",function(){if(4==a.readyState){var b=t(c);if(b){for(var g in b)"function"==typeof b[g]&&(b[g]=null);b.parentNode.removeChild(b)}}else setTimeout(arguments.callee,10)}()):a.parentNode.removeChild(a))}function t(c){var a=null;try{a=b.getElementById(c)}catch(g){}return a}
function v(c,a,b){c.attachEvent(a,b);m[m.length]=[c,a,b]}function w(c){var a=j.pv,c=c.split(".");c[0]=parseInt(c[0],10);c[1]=parseInt(c[1],10)||0;c[2]=parseInt(c[2],10)||0;return a[0]>c[0]||a[0]==c[0]&&a[1]>c[1]||a[0]==c[0]&&a[1]==c[1]&&a[2]>=c[2]?!0:!1}function M(c,a,g,l){if(!j.ie||!j.mac){var e=b.getElementsByTagName("head")[0];if(e){g=g&&"string"==typeof g?g:"screen";l&&(y=q=null);if(!q||y!=g)l=b.createElement("style"),l.setAttribute("type","text/css"),l.setAttribute("media",g),q=e.appendChild(l),
j.ie&&(j.win&&typeof b.styleSheets!=i&&0<b.styleSheets.length)&&(q=b.styleSheets[b.styleSheets.length-1]),y=g;j.ie&&j.win?q&&typeof q.addRule==p&&q.addRule(c,a):q&&typeof b.createTextNode!=i&&q.appendChild(b.createTextNode(c+" {"+a+"}"))}}}function x(c,a){if(O){var b=a?"visible":"hidden";o&&t(c)?t(c).style.visibility=b:M("#"+c,"visibility:"+b)}}function D(c){return null!=/[\\\"<>\.;]/.exec(c)&&typeof encodeURIComponent!=i?encodeURIComponent(c):c}var i="undefined",p="object",A="application/x-shockwave-flash",
r="SWFObjectExprInst",a=window,b=document,d=navigator,c=!1,g=[function(){c?H():z()}],l=[],e=[],m=[],f,h,I,N,o=!1,u=!1,q,y,O=!0,j=function(){var g=typeof b.getElementById!=i&&typeof b.getElementsByTagName!=i&&typeof b.createElement!=i,l=d.userAgent.toLowerCase(),e=d.platform.toLowerCase(),j=e?/win/.test(e):/win/.test(l),e=e?/mac/.test(e):/mac/.test(l),l=/webkit/.test(l)?parseFloat(l.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,h=!+"\v1",q=[0,0,0],f=null;if(typeof d.plugins!=i&&typeof d.plugins["Shockwave Flash"]==
p){if((f=d.plugins["Shockwave Flash"].description)&&!(typeof d.mimeTypes!=i&&d.mimeTypes[A]&&!d.mimeTypes[A].enabledPlugin))c=!0,h=!1,f=f.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),q[0]=parseInt(f.replace(/^(.*)\..*$/,"$1"),10),q[1]=parseInt(f.replace(/^.*\.(.*)\s.*$/,"$1"),10),q[2]=/[a-zA-Z]/.test(f)?parseInt(f.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}else if(typeof a.ActiveXObject!=i)try{var m=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(m&&(f=m.GetVariable("$version")))h=!0,f=f.split(" ")[1].split(","),
q=[parseInt(f[0],10),parseInt(f[1],10),parseInt(f[2],10)]}catch(y){}return{w3:g,pv:q,wk:l,ie:h,win:j,mac:e}}();(function(){j.w3&&((typeof b.readyState!=i&&"complete"==b.readyState||typeof b.readyState==i&&(b.getElementsByTagName("body")[0]||b.body))&&F(),o||(typeof b.addEventListener!=i&&b.addEventListener("DOMContentLoaded",F,!1),j.ie&&j.win&&(b.attachEvent("onreadystatechange",function(){"complete"==b.readyState&&(b.detachEvent("onreadystatechange",arguments.callee),F())}),a==top&&function(){if(!o){try{b.documentElement.doScroll("left")}catch(c){setTimeout(arguments.callee,
0);return}F()}}()),j.wk&&function(){o||(/loaded|complete/.test(b.readyState)?F():setTimeout(arguments.callee,0))}(),K(F)))})();(function(){j.ie&&j.win&&window.attachEvent("onunload",function(){for(var c=m.length,a=0;a<c;a++)m[a][0].detachEvent(m[a][1],m[a][2]);c=e.length;for(a=0;a<c;a++)J(e[a]);for(var b in j)j[b]=null;j=null;for(var g in swfobject)swfobject[g]=null;swfobject=null})})();return{registerObject:function(c,a,b,g){if(j.w3&&c&&a){var e={};e.id=c;e.swfVersion=a;e.expressInstall=b;e.callbackFn=
g;l[l.length]=e;x(c,!1)}else g&&g({success:!1,id:c})},getObjectById:function(c){if(j.w3)return G(c)},embedSWF:function(c,a,b,g,l,e,f,h,q,m){var d={success:!1,id:a};j.w3&&!(j.wk&&312>j.wk)&&c&&a&&b&&g&&l?(x(a,!1),k(function(){b+="";g+="";var j={};if(q&&typeof q===p)for(var y in q)j[y]=q[y];j.data=c;j.width=b;j.height=g;y={};if(h&&typeof h===p)for(var o in h)y[o]=h[o];if(f&&typeof f===p)for(var I in f)y.flashvars=typeof y.flashvars!=i?y.flashvars+("&"+I+"="+f[I]):I+"="+f[I];if(w(l))o=E(j,y,a),j.id==
a&&x(a,!0),d.success=!0,d.ref=o;else{if(e&&B()){j.data=e;C(j,y,a,m);return}x(a,!0)}m&&m(d)})):m&&m(d)},switchOffAutoHideShow:function(){O=!1},ua:j,getFlashPlayerVersion:function(){return{major:j.pv[0],minor:j.pv[1],release:j.pv[2]}},hasFlashPlayerVersion:w,createSWF:function(c,a,b){if(j.w3)return E(c,a,b)},showExpressInstall:function(c,a,b,g){j.w3&&B()&&C(c,a,b,g)},removeSWF:function(c){j.w3&&J(c)},createCSS:function(c,a,b,g){j.w3&&M(c,a,b,g)},addDomLoadEvent:k,addLoadEvent:K,getQueryParamValue:function(c){var a=
b.location.search||b.location.hash;if(a){/\?/.test(a)&&(a=a.split("?")[1]);if(null==c)return D(a);for(var a=a.split("&"),g=0;g<a.length;g++)if(a[g].substring(0,a[g].indexOf("="))==c)return D(a[g].substring(a[g].indexOf("=")+1))}return""},expressInstallCallback:function(){if(u){var c=t(r);c&&f&&(c.parentNode.replaceChild(f,c),h&&(x(h,!0),j.ie&&j.win&&(f.style.display="block")),I&&I(N));u=!1}}}}();
function EvDa(F){function k(a,b,d){if(1==arguments.length){if(L(a)){var c={};s(a,function(a,b){c[a]=k(a,b,d,0,1)});s(c,function(b){C(c[b])&&!C(a[b])&&(a[b]=c[b]())});return a}return B(a)?M(a,function(c){return k(c,b,d)}):p[a]}return k[C(b)?D:"set"].apply(this,arguments)}function K(a){s(a.$,function(b){r[b]=J(r[b],a)})}function H(a,b){if(L(a))return s(a,function(b,c){a[b]=H(b,c)}),a;A[a]&&(A[a](),A[a]=0);return b?a in p?b(p[a]):k(a,b,i):a in p}var z=Array.prototype.slice,G=Object.prototype.toString,
B=[].isArray||function(a){return"[object Array]"===G.call(a)},C=function(a){return!(!a||!a.constructor||!a.call||!a.apply)},L=function(a){return""===a||a&&a.charCodeAt&&a.substr?!1:null==a?"object"==""+a:"[object Object]"===G.call(a)||!0},s=[].forEach?function(a,b){if(B(a)||a.length)z.call(a).forEach(b);else for(var d in a)b(d,a[d])}:function(a,b){if(B(a))for(var d=0,c=a.length;d<c;d++)b(a[d],d);else for(d in a)b(d,a[d])},E={}.keys||function(a){if(B(a))return a;var b=[],d;for(d in a)b.push(d);return b},
J=function(a,b){var d=[];s(a,function(c){c!==b&&d.push(c)});return d},t=function(a){var b,d=[];s(E(a).sort(),function(c){c!=b&&(b=c,d.push(c))});return d},v=function(a,b){var d=[];s(a,function(c){b(c)&&d.push(c)});return d},w=function(a){return a&&"length"in a?a.length:0},M=[].map?function(a,b){return a.map(b)}:function(a,b){for(var d=[],c=0,g=a.length;c<g;c++)d.push(b(a[c],c));return d},x=function(a){s(z.call(arguments,1),function(b){for(var d in b)void 0!==b[d]&&(a[d]=b[d])});return a},D="on",i=
{once:1},p=F||{},A={},r={};s([D,"after","test"],function(a){k[a]=function(b,d,c){d||(d=b,b="__base");(d.$||(d.$=[])).push(a+b);(r[a+b]||(r[a+b]=[])).push(d);return x(d,c)}});x(k,{list:{},db:p,events:r,del:K,isset:H,setter:function(a,b){A[a]=b;r[D+a]&&H(a)},incr:function(a){return k.set(a,"[object Number]"===G.call(p[a])?p[a]+1:1)},decr:function(a){return k.set(a,p[a]-1||0)},push:function(a,b){1==w(arguments)&&(b=a,a="__base");return k.set(a,[].concat(p[a]||[],[b]))},pop:function(a){return k.set(a||
"__base",p[a].slice(0,-1))},group:function(a){var b=z.call(arguments),a=b.shift(),b=k.apply(0,b);k.list[a]||(k.list[a]=[]);C(b)?k.list[a].push(b):s(b,function(b){k.list[a].push(b)});return function(){return k.group.apply(0,[a].concat(z.call(arguments)))}},set:function(a,b,d,c,g){var l="test"+a,e=w(r[l]),m,f={meta:d||{},old:B(p[a])?z.call(p[a]):L(p[a])?x(p[a],{}):p[a],key:a,done:function(c){m|=!1===c;--e||m||k.set(a,b,d,1)}};if(e&&!c)s(r[l],function(c){c(b,f)});else return p[a]=b,c=function(){s((r[D+
a]||[]).concat(r["after"+a]||[]),function(c){c.S||(c(b,f),c.once&&K(c))});return b},g?c:c();return b},once:function(a,b){return k(a,b,{once:!0})},enable:function(a){s(k.list[a],function(b){b.S&&b.S[a]&&delete b.S[a];0==w(b.S)&&delete b.S})},setadd:function(a,b){return k(a,t((p[a]||[]).concat([b])))},setdel:function(a,b){return k(a,J(p[a]||[],b))},disable:function(a){s(k.list[a],function(b){(b.S||(b.S={}))[a]=!0})},unset:function(){s(arguments,function(a){delete p[a]})},find:function(a){return v(E(p),
function(b){return b.match(a)})},added:function(a,b){b||(b=a,a="__base");k.on(a,function(a,c){var g=w(a),l=w(c.old);g-l==1?b(a.length?a[a.length-1]:void 0):g>l&&b(z.call(a).slice(l))})},sniff:function(){k.set_=k.set;var a={};k.set=function(){var b=Array.prototype.slice.call(arguments);a[b[0]]||console.log(+new Date,b);k.set_.apply(this,b)};k.sniff=function(b){if(b)return a[b]=!a[b],"[Un]ignoring "+b;console.log(E(a))}}});k.change=k.on;k.add=k.push;return k}
(function(){function F(c){var a={};r(c,function(c){a[c]=!0});return a}function k(c,a){var b=arguments.length,e=1==b?c:a,m,f={};i.isArr(e)?(b=e.length,m=function(c){for(var a=0;a<b;a++)if(-1<p(c,e[a]))return!0;return!1}):m=function(c){return-1<p(c,e)};return 2==b?(f={},f[c]=m,f):m}function K(c){return c.length?v.call(c):C(c)}function H(){var c=v.call(arguments),a,b,e,m,f,h,d,k=K(i.isArr(this)?this:c.shift());2==c.length&&i.isStr(c[0])&&(e={},e[c[0]]=c[1],c=[s({},e)]);for(b=0;b<c.length;b++)if(a=c[b],
i.isFun(a)){a=a.single||a;f=k.length;for(d=f-1;0<=d;d--)e=k[d],a(e)&&(f-(d+1)&&(h=d+1,k.splice(h,f-h)),f=d);h=d+1;f-h&&k.splice(h,f-h)}else r(a,function(c,a){if(i.isFun(a)){f=k.length;for(d=f-1;d>=0;d--){e=k[d];if(c in e){m=e[c];i.isFun(m)&&(m=m());if(a(m,e)){if(f-(d+1)){h=d+1;k.splice(h,f-h)}f=d}}}}else{f=k.length;for(d=f-1;d>=0;d--){e=k[d];m=e[c];i.isFun(m)&&(m=m());if(c in e&&m===a){if(f-(d+1)){h=d+1;k.splice(h,f-h)}f=d}}}h=d+1;f-h&&k.splice(h,f-h)});k.first=k[0];k.last=k[k.length-1];return k}
function z(){var c=F(v.call(arguments));return function(a){for(var b in c)if(b in a)return!1;return!0}}function G(c,a){var b,e=arguments.length,d,f={};1==e?d=c:2==e&&(d=a);d=d.toString().toLowerCase();b=function(c){return-1<c.toString().toLowerCase().search(d)};return 2==e?(f={},f[c]=b,f):b}function B(c){var a={x:c};return function(c,b){2==arguments.length&&(a[c]=b);return a[c]}}function C(c){var a=[],b;for(b in c)a.push(c[b]);return a}function L(c,a){var b,e=this;a!==t&&(b=c,c={},c[b]=a);i.isFun(c)?
r(e,c):r(c,function(c,a){i.isFun(a)?r(e,function(b){if(i.isFun(b[c]))b[c](a(b));else b[c]=a(b)}):r(e,function(b){if(i.isFun(b[c]))b[c](a);else b[c]=a})});return this}function s(c,a){for(var b,e,d,f,h=arguments.length,k=0;k<h;k++){b=arguments[k];for(var p in b)e=c[p],d=b[p],c!==d&&(d&&(d.constructor==Object||(f=i.isArr(d)))?(f?(f=!1,e=e&&i.isArr(constructor)?e:[]):e=e&&e.constructor==Object?e:{},c[p]=s(e,d)):d!==t&&(c[p]=d))}return c}function E(c,a){var b=[],e;2==arguments.length?(e=c,c=a):e=this;
if(i.isArr(e))b=A(e,c);else{var b={},d;for(d in e)i.isFun(e[d])||(b[d]=c.call(this,e[d]))}return b}function J(a){D++;for(var b=0,d=a.length;b<d;b++)a[b].constructor("i",D)}var t,v=Array.prototype.slice,w=Object.prototype.toString,M={},x={},D=0,i={isFun:function(a){return!(!a||!a.constructor||!a.call||!a.apply)},isStr:function(a){return!!(""===a||a&&a.charCodeAt&&a.substr)},isNum:function(a){return"[object Number]"===w.call(a)},isArr:[].isArray||function(a){return"[object Array]"===w.call(a)},isObj:function(a){return null==
a?"object"==""+a:"[object Object]"===w.call(a)||!0}},p=[].indexOf?function(a,b){return a.indexOf(b)}:function(a,b){for(var d=a.length-1;-1!=d&&b!=a[d];d--);return d},A=[].map?function(a,b){return a.map(b)}:function(a,b){for(var d=[],e=0,i=a.length;e<i;e++)d.push(b(a[e],e));return d},r=[].forEach?function(a,b){if(i.isArr(a))a.forEach(b);else for(var d in a)b(d,a[d])}:function(a,b){if(i.isArr(a))for(var d=0,e=a.length;d<e;d++)b(a[d],d);else for(d in a)b(d,a[d])};r("< <= > >= == === != !==".split(" "),
function(a){x[a]=Function("rhs","return function(x){return x"+a+"rhs}")});var a=function(){var a={};return function(b,d){var e,m=arguments.length,f=1==m?b:d||[],h={};if(!i.isArr(f))throw new TypeError("isin's argument is wrong. ",f);f.length?20>f.length&&i.isNum(f[0])?(e=f.join(","),e=a[e]?a[e]:a[e]=new Function("x","return x=="+f.join("||x=="))):e=function(a){return-1<p(f,a)}:e=i.isFun(f)?function(a){return-1<p(f(),a)}:f;return 2==m?(h={},h[b]=e,h):e}}(),b=function(){var a=/^\s*([=<>!]+)['"]*(.*)$/,
b,d={};return function(){return function(e,m){var f,h;if(i.isStr(e)){h=e;if(1==arguments.length)if(d[h])f=d[h];else{try{f=new Function("x,rec","return x "+h)}catch(k){f={}}try{f.single=new Function("rec","return "+e)}catch(p){}d[h]=f}2==arguments.length&&i.isStr(m)&&(f={},h=m,d[h]||(d[h]=null!==(b=h.match(a))?x[b[1]](b[2].replace(/['"]$/,"")):new Function("x,rec","return x "+h)),f[e]=d[h]);return f}}}}(),d=function(a){var b={};r(a,function(a){b[a]=!0});return b}("has hasKey insert invert missing isin group keyBy remove update where select find sort orderBy order each like".split(" "));
self.DB=function(c,g){function l(){p||(p=!0,r(h,function(a){a.call(o,u)}),p=!1)}function e(a){for(var b in d)a[b]=o[b];return a}function m(a){for(var b=[],c=0,d=a.length;c<d;c++)b[c]=u[a[c]];return b}var f={},h=[],p=!1,t=!1,o=b(),u=[];s(o,{constrain:function(){var a=s,b=f,c;var d=arguments,e={};2==d.length?(e[d[0]]=d[1],c=e):1==d.length&&(c=d[0]);a(b,c)},each:E,findFirst:function(){var a=o.find.apply(this,v.call(arguments));return a.length?a[0]:{}},has:k,hasKey:function(){return o.find(z.apply(this,
v.call(arguments))).invert()},isin:a,like:G,invert:function(a){var b=u,c=[];J(a||this);for(var a=0,d=b.length;a<d;a++)b[a].constructor("i")==D||c.push(b[a]);return e(c)},map:E,missing:function(){return o.find(z.apply(this,v.call(arguments)))},sync:function(a){a?h.push(a):l()},template:{create:function(a){t=a},update:function(a){s(t||{},a)},get:function(){return t},destroy:function(){t=!1}},update:function(){var a=L.apply(i.isArr(this)?this:o.find(),v.call(arguments));l();return e(a)}});o.group=function(a){var b=
{},c=i.isArr(this)?this:o.find();r(c,function(c){a in c&&(b[c[a]]||(b[c[a]]=e([])),b[c[a]].push(c))});return b};o.keyBy=function(a){var c=o.group.apply(this,arguments);r(c,function(a,b){c[a]=b[0]});return c};o.order=o.sort=o.orderBy=function(a,c){var b,d=arguments.length,f,g=i.isArr(this)?this:o.find();i.isFun(a)?b=a:i.isStr(a)&&(1==d?f="x-y":2==d&&(f=i.isStr(c)?{asc:"x-y",desc:"y-x"}[c.toLowerCase()]:c),i.isStr(f)&&!M[f]&&(M[f]=new Function("x,y","return "+f)),eval("fnSort=function(a,b){return order(a."+
a+", b."+a+")}"));return e(v.call(g).sort(b))};o.where=o.find=function(){var a=v.call(arguments||[]);i.isArr(this)||(a=[u].concat(a));return e(H.apply(this,a))};o.view=function(a){var c={};o.sync(function(b){var d={},e;r(b,function(c){a in c&&(d[c[a]]=c)});for(e in d)e in c?c[e]!==d[e]&&(c[e]=d[e]):c[e]=d[e];for(e in c)e in d||delete c[e]});l();return c};o.select=function(a){var c=i.isArr(this)?this:o.find(),b,d={};1<arguments.length?a=v.call(arguments):i.isStr(a)&&(a=[a]);b=a.length;r(a,function(a,
e){if("*"==a)d=A(c,C);else for(var f=0,g=c.length;f<g;f++)row=c[f],a in row&&(1<b?(d[f]||(d[f]=[]),d[f][e]=row[a]):d[f]=row[a])});return e(C(d))};o.insert=function(a){var c={},b=[],d=[];1<arguments.length?b=v.call(arguments):i.isArr(a)?b=a:b.push(a);r(b,function(a){if(f.unique&&(c={},r(u,function(a,b){c[a[f.unique]]=b}),a[f.unique]in c)){d.push(c[a[f.unique]]);return}var b=u.length,e;if(t){var g={};r(t,function(a,c){g[a]=i.isFun(c)?c():c});a=s(g,a)}try{e=new (B(b)),s(e,a),u.push(e)}catch(h){a.constructor=
B(b),u.push(a)}d.push(b)});l();return e(m(d))};o.remove=function(a,c){var b,d,f=[];b=i.isArr(this)?this:i.isArr(a)?a:0<arguments.length?o.find.apply(this,v.call(arguments)):o.find();J(b);var g=u.length-1;for(b=u.length;0<=g;g--)u[g].constructor("i")==D?f.push(u[g]):(b-(g+1)&&(d=g+1,u.splice(d,b-d)),b=g);d=g+1;b-d&&u.splice(d,b-d);l();return e(f.reverse())};if(1==arguments.length)if(i.isArr(c))o.insert(c);else if(i.isFun(c))o.insert(c());else{if(i.isStr(c))return o.apply(this,arguments);i.isObj(c)&&
o.insert(c)}else 1<arguments.length&&o.insert(v.call(arguments));o.__raw__=u;return o};s(DB,{find:H,each:E,like:G,trace:function(a,b){a.__$$tracer$$__={};r(a,function(d,e){i.isFun(e)&&(a.__$$tracer$$__[d]=e,a[d]=function(){console.log.apply(this,[d+":"].concat(v.call(arguments)));b&&b.apply(this,arguments);return a.__$$tracer$$__[d].apply(this,arguments)})})},isin:a,objectify:function(a,b){var d=[];r(b,function(b){var g={};r(a,function(a,c){g[a]=b[c]});d.push(g)});return d},findFirst:function(){var a=
H.apply(this,v.call(arguments));return a.length?a[0]:{}},reduceLeft:function(a,b){var d=i.isStr(b)?new Function("y,x","return y "+b):b;return function(b){for(var g=a,f=0,h=b.length;f<h;f++)b[f]&&(g=d(g,b[f]));return g}},reduceRight:function(a,b){b=DB.reduceLeft(a,b);return function(a){return b(a.reverse())}}})})();
